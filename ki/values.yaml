# ==========================
# Kibana Values
# ==========================

# Elasticsearch connection
elasticsearchHosts: "https://elasticsearch-master:9200"

# Secret containing the username/password for Kibana to connect to Elasticsearch
elasticsearchCredentialSecret: kibana-token-secret

# Disable automatic creation of Kibana service token
elasticsearch:
  createServiceToken: true


# Elasticsearch TLS certificates (if needed)
elasticsearchCertificateSecret: elasticsearch-master-certs
elasticsearchCertificateAuthoritiesFile: ca.crt

# Kibana deployment
replicas: 1
image: "docker.elastic.co/kibana/kibana"
imageTag: "8.5.1"
imagePullPolicy: "IfNotPresent"

# Resources
resources:
  requests:
    memory: "512Mi"
    cpu: "250m"
  limits:
    memory: "1024Mi"
    cpu: "500m"

# Server host and HTTP port
serverHost: "0.0.0.0"
protocol: http
httpPort: 5601

# Extra environment variables
extraEnvs:
  - name: "NODE_OPTIONS"
    value: "--max-old-space-size=1800"

# Security context
podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
      - ALL
  runAsNonRoot: true
  runAsUser: 1000

# Service configuration
service:
  type: ClusterIP
  port: 5601
  nodePort: ""
  labels: {}
  annotations: {}

# Ingress (optional)
ingress:
  enabled: false
  className: "nginx"
  hosts:
    - host: kibana-example.local
      paths:
        - path: /

# Probes
readinessProbe:
  failureThreshold: 3
  initialDelaySeconds: 10
  periodSeconds: 10
  successThreshold: 3
  timeoutSeconds: 5
