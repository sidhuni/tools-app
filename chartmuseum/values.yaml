# -----------------------------------------------------
# ChartMuseum Helm Chart - Fully Working values.yaml
# -----------------------------------------------------

# Correct and working container image
image:
  repository: ghcr.io/helm/chartmuseum
  tag: v0.16.3
  pullPolicy: IfNotPresent

# Service configuration
service:
  type: ClusterIP
  port: 8080

# Persistence for storing chart packages
persistence:
  enabled: true
  accessMode: ReadWriteOnce
  size: 5Gi
  storageClass: ""   # (optional) set to gp2 / standard / nfs if required

# Enable ingress ONLY if needed
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - name: chartmuseum.local
      path: /
  tls: []

# ENV variables for ChartMuseum
env:
  open:
    STORAGE: local                   # store charts locally
    STORAGE_LOCAL_ROOTDIR: /storage  # default storage path
    DEBUG: false
    ALLOW_OVERWRITE: true            # allow updating existing charts
    DISABLE_API: false               # enable /api for uploading charts
    CHART_POST_FORM_FIELD_NAME: chart
    PROV_POST_FORM_FIELD_NAME: prov

# Metrics for Prometheus
metrics:
  enabled: true

# Probes
livenessProbe:
  enabled: true
  initialDelaySeconds: 10
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 3

readinessProbe:
  enabled: true
  initialDelaySeconds: 5
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 3

# Resource limits & requests
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 300m
    memory: 512Mi

# Node scheduling (optional)
nodeSelector: {}
tolerations: []
affinity: {}
