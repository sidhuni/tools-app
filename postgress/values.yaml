fullnameOverride: postgresql

auth:
  enablePostgresUser: true
  username: admin
  database: chms

  existingSecret: "postgresql-secrets"
  secretKeys:
    adminPasswordKey: postgres-password
    userPasswordKey: password

architecture: standalone

primary:
  resourcesPreset: none

  persistence:
    enabled: true
    storageClass: local-path     # ðŸ”¥ IMPORTANT FIX
    accessModes:
      - ReadWriteOnce
    size: 8Gi
    mountPath: /bitnami/postgresql

  service:
    type: NodePort               # OK for local testing

  networkPolicy:
    enabled: false

  pdb:
    create: false

# Disable read replicas for local setup
readReplicas:
  replicaCount: 0

persistentVolumeClaimRetentionPolicy:
  enabled: true


volumes:
  - name: secrets-store-inline
    csi:
      driver: secrets-store.csi.k8s.io
      readOnly: true
      volumeAttributes:
        secretProviderClass: "postgresql-secrets"

