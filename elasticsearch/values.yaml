clusterName: "elasticsearch"
nodeGroup: "master"

image: "elasticsearch"
imageTag: 8.5.1
imagePullPolicy: IfNotPresent

# Force single-node mode correctly
extraEnvs:
  - name: "discovery.type"
    value: "single-node"
  # We use a space to 'blank' out the chart's default if it's being stubborn
  - name: "cluster.initial_master_nodes"
    value: " " 

# Set replicas to 1
replicas: 1

# Resource bump is CRITICAL. Elasticsearch 8.x often crashes 
# with 1Gi during the security initialization phase.
resources:
  requests:
    cpu: "1000m"
    memory: "2Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

esJavaOpts: "-Xmx1g -Xms1g"

# Roles for a single node cluster
roles:
  - master
  - data
  - data_content
  - data_hot
  - ingest

createCert: true

# Disable the init container
sysctlInitContainer:
  enabled: false

# Readiness settings
clusterHealthCheckParams: "wait_for_status=yellow&timeout=1s"
readinessProbe:
  initialDelaySeconds: 90
  periodSeconds: 10