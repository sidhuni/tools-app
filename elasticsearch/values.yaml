# Use the Official Elastic Image instead of Bitnami's
image:
  registry: docker.elastic.co
  repository: elasticsearch/elasticsearch
  tag: 8.5.1
  pullPolicy: IfNotPresent

# THE FIX: Since we aren't using Bitnami's image, we must 
# use standard Elastic environment variables.
master:
  replicaCount: 1
  extraEnvVars:
    - name: discovery.type
      value: single-node
    - name: xpack.security.enabled
      value: "true"
  
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 2Gi

# Use Busybox for the init-container to avoid Bitnami registry issues
sysctl:
  enabled: true
  image:
    registry: docker.io
    repository: busybox
    tag: latest

# JVM configuration for the Official image
heapSize: 1024m